@using Steeltoe.Common
@using Steeltoe.Configuration
@model CloudFoundryViewModel
@{
    ViewData["Title"] = "CloudFoundry Configuration data from VCAP_APPLICATION & VCAP_SERVICES";
}

<h2>@ViewData["Title"]</h2>

@if (Platform.IsCloudFoundry)
{
    <h3>Configuration Data from VCAP_APPLICATION</h3>

    <h4>vcap:application:application_name = @Model.Application.ApplicationName</h4>
    <h4>vcap:application:application_id = @Model.Application.ApplicationId</h4>
    <h4>vcap:application:application_version = @Model.Application.ApplicationVersion</h4>
    <h4>vcap:application:application_uris = @(Model.Application.ApplicationUris != null ? Model.Application.ApplicationUris.FirstOrDefault() : "")</h4>

    <h4>vcap:application:space_name = @Model.Application.SpaceName</h4>
    <h4>vcap:application:space_id = @Model.Application.SpaceId</h4>

    <h4>vcap:application:instance_id = @Model.Application.InstanceId</h4>
    <h4>vcap:application:instance_index = @Model.Application.InstanceIndex</h4>

    <h4>vcap:application:limits:disk = @Model.Application.DiskLimit</h4>
    <h4>vcap:application:limits:mem = @Model.Application.MemoryLimit</h4>
    <h4>vcap:application:limits:fds = @Model.Application.FileDescriptorLimit</h4>

    <h4>vcap:application:start = @Model.Application.Start</h4>

    <h3>Configuration Data from VCAP_SERVICES</h3>

    @foreach (var service in Model.Services.GetAllServices())
    {
        <h4>vcap:services:@(service.Label):label = @service.Label</h4>
        <h4>vcap:services:@(service.Label):plan = @service.Plan</h4>
        <h4>vcap:services:@(service.Label):name = @service.Name</h4>
        <h4>vcap:services:@(service.Label):tags = @foreach (var tag in service.Tags) { @(tag + " ") }</h4>
        <h4>vcap:services:@(service.Label):credentials =</h4>
        <service-credentials credentials="@service.Credentials"></service-credentials>
    }
}
else
{
    <h3 class="alert-danger text-center">This page is far more interesting when running on Cloud Foundry</h3>
}
